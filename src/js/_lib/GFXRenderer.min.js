/*
* GFXRenderer v1.0.4 Copyright (c) 2016 AJ Savino
* https://github.com/koga73/GFXRenderer/
* MIT LICENSE
*/
var GFXRenderer=function(a){var b=null,c={FPS:60},d={contextType:"2d",canvas:null,context:null,paused:!1,_resizer:null,_renderInterval:null,_normalTimer:null},e={init:function(){var a=b.canvas;if(!a)throw"Canvas does not exist.";var f=b.contextType,g=a.getContext(f);if(!g)throw"Context '"+f+"' could not be created. Ensure that this feature is supported by your browser.";b.context=g,d._resizer=new Resizer({onResize:e._resize}),e._updateSize(),d._normalTimer=new NormalTimer,"requestAnimationFrame"in window?requestAnimationFrame(e._render):d._renderInterval=setInterval(e._render,1e3/c.FPS)},destroy:function(){d._normalTimer=null;var a=d._renderInterval;a&&(clearInterval(a),d._renderInterval=null);var c=d._resizer;c&&(c.destroy(),d._resizer=null);var e=b.context;e&&(b.context=null)},_render:function(){var a=d._normalTimer;if(a){var c=a.tick();!b.paused&&c<1&&b.onRender(c),d._renderInterval||requestAnimationFrame(e._render)}},_resize:function(){e._updateSize(),b.onResize&&b.onResize()},_updateSize:function(){var a=b.canvas;a.width=a.clientWidth,a.height=a.clientHeight}};b={contextType:d.contextType,canvas:d.canvas,context:d.context,paused:d.paused,elapsed:function(){return d._normalTimer?d._normalTimer.elapsed():NaN},delta:function(){return d._normalTimer?d._normalTimer.delta():NaN},init:e.init,destroy:e.destroy,onRender:null,onResize:null};for(var f in a)b[f]=a[f];return b.init(),b},NormalTimer=function(){var a={_delta:0,_lastTime:0,_startTime:(new Date).getTime()};a._lastTime=a._startTime;var b={elapsed:function(){return.001*((new Date).getTime()-a._startTime)},delta:function(){return a._delta},tick:function(){var b=(new Date).getTime();return a._delta=.001*(b-a._lastTime),a._lastTime=b,a._delta}};return{elapsed:b.elapsed,delta:b.delta,tick:b.tick}},Resizer=function(a){var b=null,c={callbackDelay:300,_lastOrientation:window.orientation,_timeout:null},d={init:function(){window.addEventListener?(window.addEventListener("resize",d._handler_resize,!1),window.addEventListener("orientationchange",d._handler_resize,!1)):window.attachEvent&&(window.attachEvent("onresize",d._handler_resize),window.attachEvent("onorientationchange",d._handler_resize))},destroy:function(){var a=c._timeout;a&&(clearTimeout(a),c._timeout=null),b.onResize=null,window.removeEventListener?(window.removeEventListener("resize",d._handler_resize),window.removeEventListener("orientationchange",d._handler_resize)):window.detachEvent&&(window.detachEvent("onresize",d._handler_resize),window.detachEvent("onorientationchange",d._handler_resize))},getWidth:function(){return window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth},getHeight:function(){return window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight},_handler_resize:function(){if("onorientationchange"in window){var a=window.orientation;if(a==c._lastOrientation)return;c._lastOrientation=a}var d=c._timeout;d&&(clearTimeout(d),c._timeout=null),c._timeout=setTimeout(function(){clearTimeout(d),c._timeout=null,b.onResize(b.getWidth(),b.getHeight())},b.callbackDelay)}};b={callbackDelay:c.callbackDelay,init:d.init,destroy:d.destroy,getWidth:d.getWidth,getHeight:d.getHeight,onResize:null};for(var e in a)b[e]=a[e];return b.init(),b};